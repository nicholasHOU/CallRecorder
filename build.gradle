buildscript {
    repositories {

        maven {
            //fix 解决mac AS 因属性文件导致的无法运行，后期调整 by hyxf
//            url getProperty("MAVEN_REPO")
//            credentials {
//                username = getProperty("MAVEN_USER")
//                password = getProperty("MAVEN_PASS")
//            }
            url "http://10.115.3.135:8081/nexus/content/groups/public"
            credentials {
                username = "deployment"
                password = "qiudongchao1988"
            }
        }
        mavenCentral()
        jcenter {
            url "http://10.69.213.71:8081/nexus/content/repositories/jcenter/"
        }
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath 'com.gutils.apkfly:plugin:2.3.0.plus_plug17'
//        classpath 'com.gutils.apkfly:plugin:2.3.0.plus11'
        classpath "org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.5"
    }
}

allprojects {
    repositories {

        maven {
//            url getProperty("MAVEN_REPO")
//            credentials {
//                username = getProperty("MAVEN_USER")
//                password = getProperty("MAVEN_PASS")
//            }
            url "http://10.115.3.135:8081/nexus/content/groups/public"
            credentials {
                username = "deployment"
                password = "qiudongchao1988"
            }
        }

        jcenter {
            url "http://10.69.213.71:8081/nexus/content/repositories/jcenter/"
        }

        // 视频SDK开发地址
        maven { url "http://10.69.213.76:8081/nexus/content/repositories/snapshots/" }

        //视频SDK生产地址
        maven { url "http://10.69.213.76:8081/nexus/content/repositories/releases/" }

        maven { url "http://10.69.213.71:8081/nexus/content/repositories/gomeMaven/" }

        maven { url "http://10.69.213.71:8081/nexus/content/repositories/MXCentral/" }
        mavenCentral()
    }
    ext {
        compileSdkVersion = getProperty("COMPILE_SDK_VERSION") as Integer
        buildToolsVersion = getProperty("BUILD_TOOLS_VERSION")
        targetSdkVersion = getProperty("TARGET_SDK_VERSION") as Integer
        minSdkVersion = getProperty("MIN_SDK_VERSION") as Integer
//        supportLibVersion = "25.3.1";
//        fastjsonLibVersion = "1.1.46.android"
        proDeps = false //改false 时需要把xiaomi的几个工程注掉
        isXiaoMi = false
        //添加此段
        mcpPkg = getEnvValue("mcpPkg",false)
    }
}

//添加此段
boolean getEnvValue(key, defValue) {
    def val = System.getProperty(key)
    if (null != val) {
        return "true" == val? true:defValue
    }
    val = System.getenv(key)
    if (null != val) {
        return "true" == val? true:defValue
    }
    return defValue
}

task clean(type: Delete) {
    delete rootProject.buildDir
}


ext.deps = [
        SRecyclerview        : 'com.android.support:recyclerview-v7:23.2.1',
        SAppcompat           : 'com.android.support:appcompat-v7:23.2.1',
        SDesign              : 'com.android.support:design:23.2.1',
        SPercent             : 'com.android.support:percent:23.0.1',
        SFresco              : 'com.facebook.fresco:fresco:1.8.1',
        SAnimatedGif         : 'com.facebook.fresco:animated-gif:1.8.1',
        SAnimatedWebp        : 'com.facebook.fresco:animated-webp:1.8.1',
        SWebpsupport         : 'com.facebook.fresco:webpsupport:1.8.1',
        SimagepipelineOkhttp3: 'com.facebook.fresco:imagepipeline-okhttp3:1.8.1',

        GSafekeyboard        : 'com.bangcle:safeKeyboard:1.0.7',
        GSecret              : 'com.gome.ecmall:secret:' + getProperty('AAR_GSECRET_VERSION') + '@aar',
        GBuildConfig         : 'com.gome.ecmall:buildconfig:' + getProperty('AAR_GCONFIG_VERSION'),
        GPlugin              : 'com.gome.ecmall.core:plugin:1.0.25@aar',

        GTheme               : 'com.gome.ecmall:theme:' + getProperty('AAR_GTHEME_VERSION') + '@aar',

        GAnalytics           : 'com.gome.ecmall:analytics:' + getProperty("AAR_GANALYTICS_VERSION") + '@aar',

        GSelectPhoto         : 'com.gome.ecmall:selectphoto:' + getProperty('AAR_GSELECT_PHOTO_VERSION') + '@aar',

        GLogStatistics       : rootProject.ext.proDeps ? project(':GLogStatistics') : 'com.gome.ecmall:logstats:' + getProperty('AAR_GLOGSTATS_VERSION') + '@aar',

        GFrame               : rootProject.ext.proDeps ? project(':GFrame') : 'com.gome.ecmall:frame:' + getProperty('AAR_GFRAME_VERSION') + '@aar',
        GCore                : rootProject.ext.proDeps ? project(':GCore') : 'com.gome.ecmall:core:' + getProperty('AAR_GCORE_VERSION') + '@aar',
        GWidget              : rootProject.ext.proDeps ? project(':GWidget') : 'com.gome.ecmall:widget:' + getProperty('AAR_GWIDGET_VERSION') + '@aar',
        GPush                : rootProject.ext.proDeps ? project(':GPush') : 'com.gome.ecmall:push:' + getProperty('AAR_GPUSH_VERSION') + '@aar',
        GLogin               : rootProject.ext.proDeps ? project(':GLogin') : 'com.gome.ecmall:login:' + getProperty('AAR_GLOGIN_VERSION') + '@aar',
        GPullrefresh         : rootProject.ext.proDeps ? project(':GPullrefresh') : 'com.gome.ecmall:pullrefresh:' + getProperty('AAR_GPULLREFRESH_VERSION') + '@aar',
        GUpdate              : rootProject.ext.proDeps ? project(':GUpdate') : 'com.gome.ecmall:update:' + getProperty('AAR_GUPDATE_VERSION') + '@aar',
        GCmbPay              : rootProject.ext.proDeps ? project(':GCmbPay') : 'com.gome.cmbpay:cmbpay:' + getProperty('AAR_CMBPAY_VERSION') + '@aar',
        Glivenesslib         : rootProject.ext.proDeps ? project(':Glivenesslib') : 'com.gome.ecmall:liveness:' + getProperty('AAR_LIVENESS_VERSION') + '@aar',
        GTongBaoSdk          : rootProject.ext.proDeps ? project(':GTongBaoSdk') : 'com.gome.ecmall:gomepay:' + getProperty('AAR_GOMEPAY_VERSION') + '@aar',
        GBaiTiao             : rootProject.ext.proDeps ? project(':GBaiTiao') : 'com.gome.ecmall:baitiao:' + getProperty('AAR_GBAITIAO_VERSION') + '@aar',
        GIm                  : rootProject.ext.proDeps ? project(':GIm') : 'com.gome.ecmall.home:im:' + getProperty('AAR_GIM_VERSION') + '@aar',
        GWap                 : rootProject.ext.proDeps ? project(':GWap') : 'com.gome.ecmall:wap:' + getProperty('AAR_GWAP_VERSION') + '@aar',
        GHybrid              : rootProject.ext.proDeps ? project(':GHybrid') : 'com.gome.ecmall:gh5:' + getProperty('AAR_GH5_VERSION') + '@aar',
        GFinanceCommon       : rootProject.ext.proDeps ? project(':GFinanceCommon') : 'com.gome.ecmall:financecommon:' + getProperty('AAR_GFINANCE_COMMON_VERSION') + '@aar',
        GFinance             : rootProject.ext.proDeps ? project(':GFinance') : 'com.gome.ecmall:finance:' + getProperty('AAR_GFINANCE_VERSION') + '@aar',
        GMeiyingbao          : rootProject.ext.proDeps ? project(':GMeiyingbao') : 'com.gome.ecmall:meiyingbao:' + getProperty('AAR_GMEIYINGBAO_VERSION') + '@aar',
        GPhoneRecharge       : rootProject.ext.proDeps  ? project(':GPhoneRecharge') : 'com.gome.ecmall:phonerecharge:' + getProperty('AAR_GPHONERECHARGE_VERSION') + '@aar',
        GStoreSearch         : rootProject.ext.proDeps ? project(':GStoreSearch') : 'com.gome.ecmall:storesearch:' + getProperty('AAR_GSTORESEARCH_VERSION') + '@aar',
        GReturn              : rootProject.ext.proDeps ? project(':GReturn') : 'com.gome.ecmall:greturn:' + getProperty('AAR_GRETURN_VERSION') + '@aar',
        GMaterialOrder       : rootProject.ext.proDeps ? project(':GMaterialOrder') : 'com.gome.ecmall:materialorder:' + getProperty('AAR_GMATERIAL_ORDER_VERSION') + '@aar',
        GProductDetail       : rootProject.ext.proDeps ? project(':GProductDetail') : 'com.gome.ecmall:product:' + getProperty('AAR_GPRODUCT_VERSION') + '@aar',
        GTQDetail            : rootProject.ext.proDeps ? project(':GTQDetail') : 'com.gome.ecmall:tqdetail:' + getProperty('AAR_GTQ_DETAIL_VERSION') + '@aar',
        GHotfix              : rootProject.ext.proDeps ? project(':GHotfix') : 'com.gome.ecmall:hotfix:' + getProperty('AAR_HOTFIX_VERSION') + '@aar',
        GZxingScan           : rootProject.ext.proDeps ? project(':GZxingScan') : 'com.gome.ecmall:gzxing:' + getProperty('AAR_GZING_VERSION') + '@aar',
        GGomeCurrency        : rootProject.ext.proDeps ? project(':GGomeCurrency') : 'com.gome.ecmall:ggomecurrency:' + getProperty('AAR_GGOMECURRENCY_VERSION') + '@aar',
        GIMRedEnvelope       : rootProject.ext.proDeps ? project(':GIMRedEnvelope') : 'com.gome.ecmall:imredenvelope:' + getProperty('AAR_IMREDENVELOPE_VERSION') + '@aar',
        GProductSearch       : rootProject.ext.proDeps ? project(':GProductSearch') : 'com.gome.ecmall:productsearch:' + getProperty('AAR_GPRODUCT_SEARCH_VERSION') + '@aar',

//        GWeexCore            : rootProject.ext.proDeps ? project(':GWeexCore') : 'com.gome.mobile.weex:core:' + getProperty('AAR_GWEEXCORE_VERSION') + '@aar',
//        GWeexUpdate          : rootProject.ext.proDeps ? project(':GWeexUpdate') : 'com.gome.mobile.weex:update:' + getProperty('AAR_GWEEXUPDATE_VERSION') + '@aar',
//        GWeexLib             : rootProject.ext.proDeps ? project(':GWeexLib') : 'com.gome.mobile.weex:components:' + getProperty('AAR_GWEEXLIB_VERSION') + '@aar',

        MSelectPhoto         : 'com.gome.ecmall:mselectphoto:' + getProperty('AAR_MSELECT_PHOTO_VERSION') + '@aar',
        MShare               : rootProject.ext.proDeps ? project(':MShare') : 'com.gome.ecmall:mshare:' + getProperty('AAR_MSHARE_VERSION') + '@aar',
        MMeixinplayer        : rootProject.ext.proDeps ? project(':MMeixinplayer') : 'com.gome.ecmall:mplayer:' + getProperty('AAR_MPLAYER_VERSION') + '@aar',
        GBusiness            : rootProject.ext.proDeps ? project(':GBusiness') : 'com.gome.ecmall:business:' + getProperty('AAR_GBUSINESS_VERSION') + '@aar',
        MImlibrary           : rootProject.ext.proDeps ? project(':MImlibrary') : 'com.gome.ecmall:mimlib:' + getProperty('AAR_MIM_LIB_VERSION') + '@aar',
        MCommon              : rootProject.ext.proDeps ? project(':MCommon') : 'com.gome.ecmall:mcommon:' + getProperty('AAR_MCOMMON_VERSION') + '@aar',
        MFriendCircle        : rootProject.ext.proDeps ? project(':MFriendCircle') : 'com.gome.ecmall:mfriendcircle:' + getProperty('AAR_MFRIEND_CIRCLE_VERSION') + '@aar',
        MIm                  : rootProject.ext.proDeps ? project(':MIm') : 'com.gome.ecmall:mim:' + getProperty('AAR_MIM_VERSION') + '@aar',
        MFriends             : rootProject.ext.proDeps ? project(':MFriends') : 'com.gome.ecmall:mfriends:' + getProperty('AAR_MFRIENDS_VERSION') + '@aar',
        MSocial              : rootProject.ext.proDeps ? project(':MSocial') : 'com.gome.ecmall:msocial:' + getProperty('AAR_MSOCIAL_VERSION') + '@aar',
        MShop                : rootProject.ext.proDeps ? project(':MShop') : 'com.gome.ecmall:mshop:' + getProperty('AAR_MSHOP_VERSION') + '@aar'

]

apply plugin: "org.sonarqube"